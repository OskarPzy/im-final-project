<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Product Quality Detection System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Industrial Product Quality Detection System</h1>
            <p class="subtitle">Intelligent Detection Based on Computer Vision and Machine Learning</p>
        </header>

        <div class="main-content">
            <!-- Statistics Cards -->
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="statTotal">{{ stats.total }}</div>
                    <div class="stat-label">Total Detections</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="statPassed">{{ stats.passed }}</div>
                    <div class="stat-label">Passed</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-value" id="statFailed">{{ stats.failed }}</div>
                    <div class="stat-label">Failed</div>
                </div>
                <div class="stat-card info">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="statPassRate">{{ "%.1f"|format(stats.pass_rate) }}%</div>
                    <div class="stat-label">Pass Rate</div>
                </div>
            </div>

            <!-- Detection Section -->
            <div class="detection-section">
                <div class="camera-panel">
                    <h2>Real-time Detection</h2>
                    <div class="video-container">
                        <video id="videoElement" autoplay playsinline></video>
                        <canvas id="canvasElement" style="display: none;"></canvas>
                        <div id="noVideo" class="no-video-message">
                            <p>üì∑ Click "Start Detection" to activate camera</p>
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button id="startBtn" class="btn btn-primary">Start Detection</button>
                        <button id="captureBtn" class="btn btn-success" disabled>Capture & Detect</button>
                        <button id="stopBtn" class="btn btn-danger" disabled>Stop Detection</button>
                    </div>
                </div>

                <div class="result-panel">
                    <h2>Detection Result</h2>
                    <div id="resultContainer" class="result-container">
                        <div class="placeholder-message">
                            <p>Waiting for detection...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Links -->
            <div class="nav-section">
                <a href="/history" class="btn btn-secondary">View Detection History</a>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

